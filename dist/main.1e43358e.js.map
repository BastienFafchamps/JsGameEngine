{"version":3,"sources":["src/engine/html/inputManager.js","src/engine/html/renderer.js","src/engine/engine.js","src/main.js"],"names":["HtmlInputManager","document","keys","addEventListener","event","__keyDownHandler","__keyUpHandler","__keyPressedHandler","key","inputManager","HtmlRenderer","canvas","ctx","getContext","width","height","style","imageRendering","clearRect","x","y","color","beginPath","rect","fillStyle","fill","closePath","image","drawImage","radius","arc","Math","PI","Engine","renderer","audioPlayer","clearInterval","interval","update","draw","setInterval","clear","drawPixel","drawRect","drawEclipse","getElementById","backgroundColor","engine","run","code","f","Function","call","error","console","warn","window"],"mappings":";;AGAA;;AACA;;AACA;;;;AAEA,IAAMW,MAAM,GAAGV,QAAQ,CAAC4C,cAAT,CAAwB,aAAxB,CAAf;AACAlC,MAAM,CAACK,KAAP,CAAa8B,eAAb,GAA+B,qBAA/B;AAEA,IAAMZ,QAAQ,GAAG,IAAIxB,iBAAJ,CAAiBC,MAAjB,CAAjB;AACA,IDPqBsB,AFAAjC,ACAAU,AEOfqC,MAAM,GAAG,IAAId,eAAJ,CAAWC,QAAX,EAAqB,IAArB,CAAf;ADLI,AFAA,ACAA,AEMJ,IAAMzB,YAAY,EDNFyB,CCMK,IAAIlC,CFNTW,ECAZ,EAAsBwB,AFAVlC,ECAZ,EAAoB,IDApB,EAAsB,CEAtB,EAAmC,GCMlB,CAAqBA,QAArB,CAArB;ADNuC,AFAb,ACAF;AEQxB,SAAS+C,GAAT,CAAaC,IAAb,EAAmB;ADPX,AFDkB,ACClB,AEQJ,MAAI,GDRKf,ADAAvB,MAAL,ECAA,CDAcA,ECAEuB,IDAhB,ICAA;AACA,ADAA,AEQAa,IAAAA,KDRKZ,ADAAvB,CEQC,CAAC6B,CFRP,GAAW9B,CEQX,IDRA,CDAiB,CAACE,CCACsB,SDAR,CAAkB,CCA7B,GDAW,CAAX;ACCH,AFFG,ACGA,AEOA,QAAIe,CHVChD,ACGAY,AEOA,GAAG,CHVR,CCGA,EDHY,AGUAqC,CFPC,CDHb,ICGkBxC,EEOV,CAAa,GFPR,CAAYG,IEOjB,CFPR,CEO+B,cAAvB,EAAuC,QAAvC,EAAiDmC,IAAjD,CAAR;AHRAhD,ACEA,AEOAiD,IHTAjD,AGSAiD,CAAC,CAACE,GFPGrC,CEOL,CAAO,CHTC,CAACZ,ECET,AEOA,EAAa4C,CFPC,KAAKpC,AEOnB,EAAqBF,IHTrB,ACEc,CDFY,ACEAM,MAA1B,CALgB,AEYhB,CFNA,CDHA,AGSmCJ,EHTE,IGSrC,MHTqCP,KAAK;AAAA,ACI1C,AEMH,GAJD,CAIE,OAAOiD,EHVyC,GGUhD,EHVoD,AGUtC,CHVuChD,gBAAL,CAAsB,KAAtB,EAA4BD,KAA5B,CAAJ;AAAA,ACK7C,AEMGkD,IAAAA,CHXA,EAAkF,IGW3E,CHXP,AGWQC,IAAR,CAAa,yDAAb,EAAwEF,KAAxE;AHVApD,AGWH,IHXGA,OECJ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","file":"main.1e43358e.js","sourceRoot":"..","sourcesContent":["\r\nexport default class HtmlInputManager {\r\n\r\n    constructor(document) {\r\n        this.keys = {};\r\n        \r\n        document.addEventListener(\"keydown\", event => this.__keyDownHandler(this, event), false);\r\n        document.addEventListener(\"keyup\", event => this.__keyUpHandler(this, event), false);\r\n        document.addEventListener(\"keypress\", event => this.__keyPressedHandler(this, event), false);\r\n    }\r\n\r\n    isKeyDown(key) {\r\n        return key in this.keys && this.keys[key] == 1;\r\n    }\r\n\r\n    isKeyPressed(key) {\r\n        return key in this.keys && this.keys[key] == 2;\r\n    }\r\n\r\n    isKeyUp() {\r\n        return !(key in this.keys);\r\n    }\r\n\r\n\r\n    __keyDownHandler(inputManager, event) {\r\n        inputManager.keys[event.key] = 1;\r\n    }\r\n    \r\n    __keyPressedHandler(inputManager, event) {\r\n        inputManager.keys[event.key] = 2;\r\n    }\r\n    \r\n    __keyUpHandler(inputManager, event) {\r\n        if (event.key in inputManager.keys)\r\n            delete inputManager.keys[event.key];\r\n    }\r\n}","\r\nexport default class HtmlRenderer {\r\n\r\n    constructor(canvas) {\r\n        this.canvas = canvas;\r\n        this.ctx = canvas.getContext(\"2d\");\r\n\r\n        this.width = this.canvas.width;\r\n        this.height = this.canvas.height;\r\n        // this.canvas = document.createElement('canvas');\r\n        // this.ctx = new CanvasRenderingContext2D();\r\n    }\r\n\r\n    upscaleCanvas(width, height) {\r\n        this.canvas.style.width = width + 'px';\r\n        this.canvas.style.height = height + 'px';\r\n    }\r\n\r\n    setCripsPixel() {\r\n        this.canvas.style.imageRendering = '-moz-crisp-edges';\r\n        this.canvas.style.imageRendering = '-webkit-crisp-edges';\r\n        this.canvas.style.imageRendering = 'pixelated';\r\n        this.canvas.style.imageRendering = 'crisp-edges';\r\n    }\r\n\r\n    clear() {\r\n        this.ctx.clearRect(0, 0, this.width, this.height);\r\n    }\r\n\r\n    drawPixel(x, y, color) {\r\n        this.ctx.beginPath();\r\n        this.ctx.rect(x, y, 1, 1);\r\n        this.ctx.fillStyle = color;\r\n        this.ctx.fill();\r\n        this.ctx.closePath();\r\n    }\r\n\r\n    drawImage(x, y, image) {\r\n        this.ctx.drawImage(image, x, y);\r\n    }\r\n\r\n    drawRect(x, y, width, height, color) {\r\n        this.ctx.beginPath();\r\n        this.ctx.rect(x, y, width, height);\r\n        this.ctx.fillStyle = color;\r\n        this.ctx.fill();\r\n        this.ctx.closePath();\r\n    }\r\n\r\n    drawEclipse(x, y, radius, color) {\r\n        this.ctx.beginPath();\r\n        this.ctx.arc(x, y, radius, 0, Math.PI * 2);\r\n        this.ctx.fillStyle = color;\r\n        this.ctx.fill();\r\n        this.ctx.closePath();\r\n    }\r\n}","\r\nexport default class Engine {\r\n\r\n    constructor(renderer, audioPlayer) {\r\n        this.renderer = renderer;\r\n        this.audioPlayer = audioPlayer;\r\n    }\r\n\r\n    clear() {\r\n        clearInterval(this.interval); \r\n    }\r\n\r\n    start(update, draw) {\r\n        this.interval = setInterval(() => {\r\n            update();\r\n            this.renderer.clear();\r\n            draw();\r\n        }, 10);\r\n    }\r\n\r\n    stop() {\r\n        clearInterval(this.interval); // Needed for Chrome to end game\r\n    }\r\n\r\n    drawPixel(x, y, color) {\r\n        this.renderer.drawPixel(x, y, color);\r\n    }\r\n\r\n    drawImage(x, y, image) {\r\n        this.renderer.drawImage(image, x, y);\r\n    }\r\n\r\n    drawRect(x, y, width, height, color) {\r\n        this.renderer.drawRect(x, y, width, height, color);\r\n    }\r\n\r\n    drawEclipse(x, y, radius, color) {\r\n        this.renderer.drawEclipse(x, y, radius, color);\r\n    }\r\n}","import HtmlInputManager from \"./engine/html/inputManager\";\r\nimport HtmlRenderer from \"./engine/html/renderer\";\r\nimport Engine from \"./engine/engine\";\r\n\r\nconst canvas = document.getElementById(\"main-canvas\");\r\ncanvas.style.backgroundColor = 'rgba(255, 255, 255)';\r\n\r\nconst renderer = new HtmlRenderer(canvas);\r\nconst engine = new Engine(renderer, null);\r\nconst inputManager = new HtmlInputManager(document);\r\n\r\nfunction run(code) {\r\n    try {\r\n        engine.clear();\r\n        let f = new Function('engine', 'inputManager', 'canvas', code);\r\n        f.call(this, engine, inputManager, canvas);\r\n    } catch (error) {\r\n        console.warn(\"There are code errors, fix them before running the code\", error);\r\n    }\r\n}\r\n\r\nwindow.run = run;"]}